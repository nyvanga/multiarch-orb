description: >
  Creates manifest that combines the two architecture builds.
  Then removes the temporary architecture image tags.

executor: default

parameters:
  image:
    type: string
    description: "Base container image name"
  tags:
    type: string
    default: "latest"
    description: "Whitespace delimited list of tags (default 'latest')."

steps:
  - docker_login
  - create_and_push_manifests:
      image: "<< parameters.image >>"
      tags: "<< parameters.tags >>"
  - remove_docker_hub_tag:
      image: "<< parameters.image >>"
      tag: "x86_64"
  - remove_docker_hub_tag:
      image: "<< parameters.image >>"
      tag: "arm64"
